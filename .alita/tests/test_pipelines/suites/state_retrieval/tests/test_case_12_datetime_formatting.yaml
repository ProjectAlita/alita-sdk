name: "SR12 - DateTime Formatting"
description: "Verify datetime formatting in code node with output string format"

state:
  input:
    type: str
  messages:
    type: list
  test_data:
    type: number
    value: '1'
entry_point: code_to_catch_bug_with_new_lines
nodes:
  - id: code_to_catch_bug_with_new_lines
    type: code
    code:
      type: fixed
      value: |-
        from datetime import datetime
        current_date = datetime.now()
        current_time = datetime.now()

        output_string = f"""11
        Test comment {current_date}{current_time}"""
        print(output_string)

        # Verify the output contains expected elements
        nl = chr(10)
        has_newline = nl in output_string
        has_number = "11" in output_string
        has_comment = "Test comment" in output_string
        has_datetime = "2026" in output_string or "2025" in output_string or "2024" in output_string

        test_results = {
            "test_passed": has_newline and has_number and has_comment and has_datetime,
            "formatted_message": output_string,
            "has_newline": has_newline,
            "has_number": has_number,
            "has_comment": has_comment,
            "has_datetime": has_datetime
        }
        test_results
    input: []
    output: []
    structured_output: true
    transition: END
