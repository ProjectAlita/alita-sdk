
services:
  alita-sdk:
    image: ghcr.io/projectalita/alita-sdk:latest
    container_name: alita-sdk-dev
    environment:
      - GIT_TOOL_ACCESS_TOKEN=${GIT_TOOL_ACCESS_TOKEN}
      - DEPLOYMENT_URL=${DEPLOYMENT_URL}
      - API_KEY=${ALITA_API_KEY}
      - PROJECT_ID=${PROJECT_ID}
      - TEST_CASES_DIR=${TEST_CASES_DIR:-github}
      - CONFLUENCE_API_KEY=${CONFLUENCE_API_KEY}
      - CONFLUENCE_BASE_URL=${CONFLUENCE_BASE_URL}
      - CONFLUENCE_USERNAME=${CONFLUENCE_USERNAME}
      - ADO_TOKEN=${ADO_TOKEN}
      - ADO_REPOSITORY_ID=${ADO_REPOSITORY_ID}
      - ADO_ORGANIZATION_URL=${ADO_ORGANIZATION_URL}
      - ADO_PROJECT=${ADO_PROJECT}
      - PYTHONUNBUFFERED=1
      - PYTHONPATH=/app
    volumes:
      - ./.github:/app/.github
      - ./.alita:/app/.alita
      - ./alita_sdk:/app/alita_sdk
    command: >
      sh -c "alita agent execute-test-cases
      .alita/agents/test-runner.agent.md
      --test-cases-dir .alita/tests/testcases/$${TEST_CASES_DIR}
      --results-dir .alita/tests/results
      --data-generator .alita/agents/test-data-generator.agent.md
      --dir .alita"

  pgvector-db:
    image: ankane/pgvector
    container_name: local-alita-pgvector-db
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=yourpassword
      - POSTGRES_DB=postgres
    ports:
      - "5435:5432"
